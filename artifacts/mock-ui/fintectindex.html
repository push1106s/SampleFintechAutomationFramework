<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Fintech Mock UI</title>
  <style>
    body { font-family: sans-serif; margin: 24px; }
    form, .card { border:1px solid #ddd; padding:16px; margin-bottom:24px; border-radius:8px; }
    label { display:block; margin:6px 0; }
    input { padding:6px; width: 280px; }
    button { padding:8px 14px; cursor:pointer; }
    .ok { color: green; } .err { color: #b00020; }
    pre { background:#f8f8f8; padding:12px; overflow:auto; }
  </style>
</head>
<body>
  <h1>Fintech Mock UI</h1>

  <div class="card">
    <h2>User Registration</h2>
    <form id="userForm">
      <label>Name <input id="name" required></label>
      <label>Email <input id="email" required></label>
      <label>Account Type <input id="accountType" value="premium" required></label>
      <button type="submit">Create User</button>
    </form>
    <div id="userMsg"></div>
    <pre id="userOut"></pre>
  </div>

  <div class="card">
    <h2>Create Transaction</h2>
    <form id="txForm">
      <label>User ID <input id="userId" value="123" required></label>
      <label>Recipient ID <input id="recipientId" value="456" required></label>
      <label>Amount <input id="amount" type="number" value="100.50" required></label>
      <button type="submit">Create Transaction</button>
    </form>
    <div id="txMsg"></div>
    <pre id="txOut"></pre>
  </div>

  <script>
    const API = 'http://localhost:9090';
    const AUTH = 'Bearer valid-test-token';

    async function post(path, body) {
      const r = await fetch(API + path, {
        method:'POST',
        headers: { 'Content-Type':'application/json', 'Authorization': AUTH },
        body: JSON.stringify(body)
      });
      const text = await r.text();
      let json = null; try { json = JSON.parse(text); } catch(e){}
      return { status: r.status, json, text };
    }

    document.getElementById('userForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const body = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        accountType: document.getElementById('accountType').value
      };
      const res = await post('/api/users', body);
      const msg = document.getElementById('userMsg');
      const out = document.getElementById('userOut');
      msg.className = res.status === 201 ? 'ok' : 'err';
      msg.textContent = res.status === 201 ? 'User created' : 'Error creating user';
      out.textContent = JSON.stringify(res.json ?? res.text, null, 2);
    });

    document.getElementById('txForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const body = {
        userId: document.getElementById('userId').value,
        amount: parseFloat(document.getElementById('amount').value),
        type: 'transfer',
        recipientId: document.getElementById('recipientId').value
      };
      const res = await post('/api/transactions', body);
      const msg = document.getElementById('txMsg');
      const out = document.getElementById('txOut');
      msg.className = res.status === 201 ? 'ok' : 'err';
      msg.textContent = res.status === 201 ? 'Transaction created' : 'Error creating transaction';
      out.textContent = JSON.stringify(res.json ?? res.text, null, 2);
    });
  </script>
</body>
</html>
